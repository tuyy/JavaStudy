### kafka
* 최소 3대 이상으로 클러스터를 구성한다.
* 주키퍼는 무조건 홀수로 클러스터를 구성해야한다.
* ISR ? (In Sync Replicas)
    * 브로커 별로 리더와 팔로워로 구성된다.
    * 리더만 읽고 쓰기를 진행한다.
    * 팔로워는 리더와 주기적으로 메시지를 동기화한다.
    * 만약 리더가 장애가난다면 남은 팔로워들 중 리더를 선출하게 된다. (shirinking ISR)
    
#### Producer
* 설정 중에 ACKS가 중요하다. (0, 1, ALL)
    * ACKS는 client에게 응답시 어디까지 작업하고 응답할지에 대한 설정이다.
* producer 설정 중에 key 값을 설정하면 하나의 파티션에만 메시지를 저장하게된다. (분배안됨)
* kafka는 파티션이 1개일때만 메시지 순서가 보장된다.

#### Consumer
* offset을 이용해서 메시지를 가져온다.
* 파티션별로 offset 순서로 가져온다.
* 컨슈머 그룹을 지정하면 동일한 메시지는 가져오지 않는다.
* LAG : 얼마나 메시지를 안밀리고 쓰는지에 대한 지표 [Burrow](https://github.com/linkedin/Burrow)
